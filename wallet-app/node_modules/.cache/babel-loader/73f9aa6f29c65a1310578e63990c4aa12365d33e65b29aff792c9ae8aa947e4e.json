{"ast":null,"code":"import React,{useState}from'react';import'../styles/Modal.css';import BlockchainAPI from'../services/BlockchainAPI';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TokenAddModal=_ref=>{let{isOpen,onClose,onAdd}=_ref;const[network,setNetwork]=useState('ETH');const[tokenAddress,setTokenAddress]=useState('');const[customName,setCustomName]=useState('');const[customSymbol,setCustomSymbol]=useState('');const[customDecimals,setCustomDecimals]=useState('18');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const[tokenInfo,setTokenInfo]=useState(null);const resetForm=()=>{setNetwork('ETH');setTokenAddress('');setCustomName('');setCustomSymbol('');setCustomDecimals('18');setError('');setTokenInfo(null);};const handleClose=()=>{resetForm();onClose();};const fetchTokenInfo=async()=>{if(!tokenAddress){setError('Please enter a token address');return;}try{setIsLoading(true);setError('');const info=await BlockchainAPI.getTokenInfo(network,tokenAddress);if(info){setTokenInfo(info);setCustomName(info.name);setCustomSymbol(info.symbol);setCustomDecimals(info.decimals.toString());}else{setError('Token information not found. Please enter details manually.');}}catch(error){console.error('Error fetching token info:',error);setError('Error fetching token information. Please enter details manually.');}finally{setIsLoading(false);}};const handleAdd=()=>{if(!tokenAddress){setError('Token address is required');return;}if(!customName){setError('Token name is required');return;}if(!customSymbol){setError('Token symbol is required');return;}if(!customDecimals||isNaN(parseInt(customDecimals))){setError('Token decimals must be a valid number');return;}const newToken={network,tokenAddress,name:customName,symbol:customSymbol,decimals:parseInt(customDecimals)};onAdd(newToken);handleClose();};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-container token-add-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Token\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:handleClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Network\"}),/*#__PURE__*/_jsxs(\"select\",{value:network,onChange:e=>setNetwork(e.target.value),className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"ETH\",children:\"Ethereum (ERC-20)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"TRX\",children:\"Tron (TRC-20)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BSC\",children:\"Binance Smart Chain (BEP-20)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Token Contract Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-button\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tokenAddress,onChange:e=>setTokenAddress(e.target.value),placeholder:\"0x...\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTokenInfo,disabled:isLoading,className:\"lookup-button\",children:isLoading?'Loading...':'Lookup'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Token Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customName,onChange:e=>setCustomName(e.target.value),placeholder:\"e.g. Chainlink\",className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Token Symbol\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customSymbol,onChange:e=>setCustomSymbol(e.target.value),placeholder:\"e.g. LINK\",className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Decimals\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:customDecimals,onChange:e=>setCustomDecimals(e.target.value),placeholder:\"18\",className:\"form-control\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel-button\",onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-button\",onClick:handleAdd,children:\"Add Token\"})]})]})});};export default TokenAddModal;","map":{"version":3,"names":["React","useState","BlockchainAPI","jsx","_jsx","jsxs","_jsxs","TokenAddModal","_ref","isOpen","onClose","onAdd","network","setNetwork","tokenAddress","setTokenAddress","customName","setCustomName","customSymbol","setCustomSymbol","customDecimals","setCustomDecimals","isLoading","setIsLoading","error","setError","tokenInfo","setTokenInfo","resetForm","handleClose","fetchTokenInfo","info","getTokenInfo","name","symbol","decimals","toString","console","handleAdd","isNaN","parseInt","newToken","className","children","onClick","value","onChange","e","target","type","placeholder","disabled"],"sources":["C:/Cold_Wallet/wallet-app/src/components/TokenAddModal.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../styles/Modal.css';\r\nimport BlockchainAPI from '../services/BlockchainAPI';\r\n\r\nconst TokenAddModal = ({ isOpen, onClose, onAdd }) => {\r\n  const [network, setNetwork] = useState('ETH');\r\n  const [tokenAddress, setTokenAddress] = useState('');\r\n  const [customName, setCustomName] = useState('');\r\n  const [customSymbol, setCustomSymbol] = useState('');\r\n  const [customDecimals, setCustomDecimals] = useState('18');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [tokenInfo, setTokenInfo] = useState(null);\r\n  \r\n  const resetForm = () => {\r\n    setNetwork('ETH');\r\n    setTokenAddress('');\r\n    setCustomName('');\r\n    setCustomSymbol('');\r\n    setCustomDecimals('18');\r\n    setError('');\r\n    setTokenInfo(null);\r\n  };\r\n  \r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n  \r\n  const fetchTokenInfo = async () => {\r\n    if (!tokenAddress) {\r\n      setError('Please enter a token address');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      setError('');\r\n      \r\n      const info = await BlockchainAPI.getTokenInfo(network, tokenAddress);\r\n      \r\n      if (info) {\r\n        setTokenInfo(info);\r\n        setCustomName(info.name);\r\n        setCustomSymbol(info.symbol);\r\n        setCustomDecimals(info.decimals.toString());\r\n      } else {\r\n        setError('Token information not found. Please enter details manually.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching token info:', error);\r\n      setError('Error fetching token information. Please enter details manually.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleAdd = () => {\r\n    if (!tokenAddress) {\r\n      setError('Token address is required');\r\n      return;\r\n    }\r\n    \r\n    if (!customName) {\r\n      setError('Token name is required');\r\n      return;\r\n    }\r\n    \r\n    if (!customSymbol) {\r\n      setError('Token symbol is required');\r\n      return;\r\n    }\r\n    \r\n    if (!customDecimals || isNaN(parseInt(customDecimals))) {\r\n      setError('Token decimals must be a valid number');\r\n      return;\r\n    }\r\n    \r\n    const newToken = {\r\n      network,\r\n      tokenAddress,\r\n      name: customName,\r\n      symbol: customSymbol,\r\n      decimals: parseInt(customDecimals)\r\n    };\r\n    \r\n    onAdd(newToken);\r\n    handleClose();\r\n  };\r\n  \r\n  if (!isOpen) return null;\r\n  \r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-container token-add-modal\">\r\n        <div className=\"modal-header\">\r\n          <h2>Add Token</h2>\r\n          <button className=\"close-button\" onClick={handleClose}>Ã—</button>\r\n        </div>\r\n        \r\n        <div className=\"modal-body\">\r\n          {error && <div className=\"error-message\">{error}</div>}\r\n          \r\n          <div className=\"form-group\">\r\n            <label>Network</label>\r\n            <select \r\n              value={network} \r\n              onChange={(e) => setNetwork(e.target.value)}\r\n              className=\"form-control\"\r\n            >\r\n              <option value=\"ETH\">Ethereum (ERC-20)</option>\r\n              <option value=\"TRX\">Tron (TRC-20)</option>\r\n              <option value=\"BSC\">Binance Smart Chain (BEP-20)</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label>Token Contract Address</label>\r\n            <div className=\"input-with-button\">\r\n              <input \r\n                type=\"text\" \r\n                value={tokenAddress} \r\n                onChange={(e) => setTokenAddress(e.target.value)}\r\n                placeholder=\"0x...\"\r\n                className=\"form-control\"\r\n              />\r\n              <button \r\n                onClick={fetchTokenInfo}\r\n                disabled={isLoading}\r\n                className=\"lookup-button\"\r\n              >\r\n                {isLoading ? 'Loading...' : 'Lookup'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label>Token Name</label>\r\n            <input \r\n              type=\"text\" \r\n              value={customName} \r\n              onChange={(e) => setCustomName(e.target.value)}\r\n              placeholder=\"e.g. Chainlink\"\r\n              className=\"form-control\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label>Token Symbol</label>\r\n            <input \r\n              type=\"text\" \r\n              value={customSymbol} \r\n              onChange={(e) => setCustomSymbol(e.target.value)}\r\n              placeholder=\"e.g. LINK\"\r\n              className=\"form-control\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label>Decimals</label>\r\n            <input \r\n              type=\"number\" \r\n              value={customDecimals} \r\n              onChange={(e) => setCustomDecimals(e.target.value)}\r\n              placeholder=\"18\"\r\n              className=\"form-control\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"modal-footer\">\r\n          <button className=\"cancel-button\" onClick={handleClose}>Cancel</button>\r\n          <button className=\"confirm-button\" onClick={handleAdd}>Add Token</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TokenAddModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}